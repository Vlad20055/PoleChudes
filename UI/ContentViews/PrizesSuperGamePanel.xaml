<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:UI.ViewModels"
    x:Class="UI.ContentViews.PrizesSuperGamePanel"
    x:DataType="vm:PrizesSuperGamePanelViewModel"
    IsVisible="{Binding IsVisible}">

    <!-- 
    Внешний Grid: три строки:
      0) Auto  — для метки Score
      1) *     — для списка призов (BindableLayout)
      2) Auto  — для кнопки внизу 
  -->
    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Score -->
            <RowDefinition Height="*" />
            <!-- Список призов -->
            <RowDefinition Height="Auto" />
            <!-- Кнопка -->
        </Grid.RowDefinitions>

        <!-- 1) Score -->
        <Label
        Grid.Row="0"
        Text="{Binding Score, StringFormat='{}{0}'}"
        FontSize="20"
        HorizontalOptions="Center" />

        <!-- 2) Список призов -->
        <VerticalStackLayout
        Grid.Row="1"
        BindableLayout.ItemsSource="{Binding Prizes}"
        Spacing="10"
        VerticalOptions="Start"
        HorizontalOptions="Fill">

            <BindableLayout.ItemTemplate>
                <DataTemplate x:DataType="vm:PrizeSuperGameUnitViewModel">

                    <!-- Каждый ряд — Grid с двумя колонками -->
                    <Grid HorizontalOptions="Fill">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Button
                Grid.Column="0"
                BackgroundColor="{Binding IsSelected, Converter={StaticResource BoolToColorConverter}}"
                Text="{Binding Name}"
                TextColor="Black"
                FontAttributes="Bold"
                Clicked="Prize_Clicked"
                HorizontalOptions="Fill" />

                        <Label
                Grid.Column="1"
                Text="{Binding Cost, StringFormat='{}{0}'}"
                VerticalOptions="Center" />

                    </Grid>

                </DataTemplate>
            </BindableLayout.ItemTemplate>

        </VerticalStackLayout>

        <!-- 3) Кнопка внизу -->
        <Button
        Grid.Row="2"
        Text="Выбрать"
        HorizontalOptions="Center"
        VerticalOptions="End"
        WidthRequest="200"
        Margin="0,10,0,0"
        Clicked="Confirm_Clicked" />
        <!-- Если команда не нужна, вместо Command можно обработчик Clicked -->
    </Grid>
</ContentView>
